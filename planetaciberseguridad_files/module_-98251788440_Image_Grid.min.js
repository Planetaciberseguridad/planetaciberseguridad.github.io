var module_98251788440=function(){const moduleConfig=(moduleName=>{const configJSONScript=document.querySelector(`[data-${moduleName}-config]`);return configJSONScript?JSON.parse(configJSONScript.textContent):{}})("image_grid"),gridsToLightbox=document.querySelectorAll('[data-grid_action_type="lightbox"]'),contentToFit=document.querySelectorAll(".hs-image__grid__item__overlay__content--fit"),parser=new DOMParser,renderNavButton=(direction,ariaLabel,iconMarkup)=>{const button=document.createElement("button"),icon=parser.parseFromString(iconMarkup,"text/html");return button.setAttribute("data-direction",direction),button.setAttribute("aria-label",ariaLabel),button.classList.add("hs-image__grid__lightbox__button"),button.classList.add("hs-image__grid__lightbox__button--"+(1===direction?"next":"prev")),button.classList.add("hs-image__grid__lightbox__button--hide"),button.appendChild(icon.body.firstChild),button},renderLightboxElement=data=>{const link="null"!==data.lb_href&&JSON.parse(data.lb_href),lightboxElement=document.createElement("div");return lightboxElement.classList.add(moduleConfig.name_class),lightboxElement.classList.add("hs-image__grid__lightbox"),lightboxElement.appendChild(renderNavButton(-1,moduleConfig.aria_previous_button_label,moduleConfig?.previous_page_icon_markup)),lightboxElement.appendChild(((link,data)=>{const image=document.createElement("img");if(image.classList.add("hs-image__grid__lightbox__image"),image.src=data.lb_image_src,link.url?.href){const linkElement=document.createElement("a");return linkElement.setAttribute("href",link.url.href),linkElement.setAttribute("rel",link.rel),link.open_in_new_tab&&linkElement.setAttribute("target","_blank"),linkElement.appendChild(image),linkElement}return image})(link,data)),lightboxElement.appendChild(renderNavButton(1,moduleConfig.aria_next_button_label,moduleConfig?.next_page_icon_markup)),lightboxElement.appendChild((ariaLabel=>{const closeButton=document.createElement("button"),closeButtonX=parser.parseFromString("&#x2715","text/html");return closeButton.classList.add("hs-image__grid__lightbox__button--close"),closeButton.setAttribute("aria-hidden","true"),closeButton.setAttribute("aria-label",ariaLabel),closeButton.appendChild(closeButtonX.body.firstChild),closeButton})(moduleConfig.aria_close_button_label)),lightboxElement},activateLightboxKeyboardNav=lightBox=>{(lightBox=>{const focusableElements='button:not(.hs-image__grid__lightbox__button--hide), [href], [tabindex]:not([tabindex="-1"])',firstFocusableElement=lightBox.querySelectorAll(focusableElements)[0],focusableContent=lightBox.querySelectorAll(focusableElements),lastFocusableElement=focusableContent[focusableContent.length-1];document.addEventListener("keydown",(function(e){"Tab"===e.key&&(e.shiftKey&&document.activeElement===firstFocusableElement?(lastFocusableElement.focus(),e.preventDefault()):e.shiftKey||document.activeElement!==lastFocusableElement||(firstFocusableElement.focus(),e.preventDefault()))})),firstFocusableElement.focus()})(lightBox.element()),(lightBox=>{lightBox.element().addEventListener("click",(()=>{lightBox.close()}))})(lightBox)};document.addEventListener("DOMContentLoaded",(()=>{const inEditor=moduleConfig?.in_editor,overlayFontMaxSize=moduleConfig?.overlay_font_max_size||32;gridsToLightbox&&!inEditor&&gridsToLightbox.forEach((gridListItems=>{(gridListItems=>{const lightboxItems=Array.from(gridListItems.querySelectorAll(".hs-image__grid__list__item")).map((item=>{const lightBoxElement=basicLightbox.create(renderLightboxElement(item.dataset));return item.addEventListener("click",(()=>{lightBoxElement.show(activateLightboxKeyboardNav)})),lightBoxElement}));lightboxItems.length>1&&lightboxItems.forEach((lightBoxElement=>{lightBoxElement.element().querySelectorAll("button.hs-image__grid__lightbox__button").forEach((button=>{const direction=parseInt(button.dataset.direction,10),nextLightbox=lightboxItems.indexOf(lightBoxElement)+direction;nextLightbox>=0&&nextLightbox<=lightboxItems.length-1&&button.classList.remove("hs-image__grid__lightbox__button--hide"),button.addEventListener("click",(()=>{lightBoxElement.close((()=>{lightboxItems[nextLightbox].show(activateLightboxKeyboardNav)}))}))}))}))})(gridListItems)})),contentToFit&&(fitty(".hs-image__grid__item__overlay__content--fit",{minSize:12,maxSize:parseInt(overlayFontMaxSize,10)}),setTimeout((()=>{fitty.fitAll()}),200))}))}();